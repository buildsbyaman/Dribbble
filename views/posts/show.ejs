<% layout('layouts/boilerplate') -%>

<div class="post-detail-wrapper">
  <div class="post-detail-container">
    <div class="post-navigation">
      <a href="/post" class="back-link">
        <svg
          class="back-icon"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M19 12H5M12 19l-7-7 7-7" />
        </svg>
        Back to Homepage
      </a>
    </div>

    <div class="post-showcase">
      <div class="post-image-container">
        <img
          src="<%= post.image %>"
          alt="<%= post.title %>"
          class="showcase-image"
        />
      </div>

      <div class="post-info-section">
        <div class="post-header-content">
          <div class="title-area">
            <h1 class="showcase-title"><%= post.title %></h1>
            <div class="stat-badge-header">
              <div class="stat-badge">
                <img class="stat-icon-hearts" src="/images/heart.png" alt="" />
                <span class="stat-number"><%= post.hearts || 0 %></span>
              </div>
              <div class="stat-badge">
                <img class="stat-icon-views" src="/images/views.gif" alt="" />
                <span class="stat-number"><%= post.views || 0 %></span>
              </div>
            </div>
          </div>
          <h1 class="author-name-mini">
            Posted By : <%= post.author.username %>
          </h1>

          <% if(currUser && currUser.id == post.author.id) { %>
          <div class="action-buttons">
            <a href="/post/<%= post._id %>/edit" class="action-btn edit-btn">
              <svg
                class="btn-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
                />
                <path
                  d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
                />
              </svg>
              Edit
            </a>
            <form
              class="delete-action"
              action="/post/<%= post._id %>?_method=DELETE"
              method="POST"
              onsubmit="return confirm('Are you sure you want to delete this post?')"
            >
              <button type="submit" class="action-btn delete-btn">
                <svg
                  class="btn-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <polyline points="3,6 5,6 21,6" />
                  <path
                    d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"
                  />
                </svg>
                Delete
              </button>
            </form>
          </div>
          <% } %> <% if (post.description) { %>
          <div class="description-section">
            <div class="showcase-description">
              <% if (post.tags && post.tags.length > 0) { %> <%
              post.tags.forEach(tag => { %>
              <span>#<%= tag %> &nbsp;</span>
              <% }) %>
              <br />
              <% } %> <%= post.description %>
            </div>
          </div>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>
