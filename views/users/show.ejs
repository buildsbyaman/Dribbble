<%- layout('layouts/boilerplate.ejs') %>

<main class="user-page">
  <div class="user-container">
    <div class="user-header">
      <div class="user-avatar">
        <div class="avatar-circle">
          <span class="avatar-initial"
            ><%= currUser.username.charAt(0).toUpperCase() %></span
          >
        </div>
      </div>

      <div class="user-info">
        <h1 class="user-username">@<%= currUser.username %></h1>
      </div>

      <% if (currUser && currUser._id.toString() === currUser._id.toString()) {
      %>
      <div class="user-actions">
        <a href="/user/edit" class="btn btn-edit user-edit-btn">
          <svg class="edit-icon" viewBox="0 0 20 20" fill="currentColor">
            <path
              d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
            />
          </svg>
          Edit user
        </a>
      </div>
      <% } %>
    </div>

    <div class="user-details">
      <div class="detail-section">
        <h2 class="section-title">Account Information</h2>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">Username:</span>
            <span class="detail-value">@<%= currUser.username %></span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Email:</span>
            <span class="detail-value"><%= currUser.email %></span>
          </div>
          <% if (currUser.age) { %>
          <div class="detail-item">
            <span class="detail-label">Age:</span>
            <span class="detail-value"><%= currUser.age %> years old</span>
          </div>
          <% } %>
        </div>
      </div>

      <div class="detail-section">
        <h2 class="section-title">Activity Summary</h2>
        <div class="activity-summary">
          <p class="activity-text">
            <strong><%= currUser.username %></strong> has contributed
            <strong><%= currUser.totalContributions || 0 %></strong> shots to
            the Dribbble community.
          </p>
          <% if (!currUser.totalContributions || currUser.totalContributions ===
          0) { %>
          <p class="activity-empty">
            No shots uploaded yet. Start sharing your creative work!
          </p>
          <% } %>
        </div>
      </div>
    </div>

    <div class="recent-activity">
      <h2 class="section-title">Recent Shots</h2>
      <div class="activity-placeholder">
        <div class="placeholder-icon">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <circle cx="8.5" cy="8.5" r="1.5" />
            <polyline points="21,15 16,10 5,21" />
          </svg>
        </div>
        <p class="placeholder-text">No shots to display yet</p>
        <% if (currUser && currUser._id.toString() === currUser._id.toString())
        { %>
        <a href="/post/new" class="btn btn-primary">
          <svg
            class="btn-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
            />
            <polyline points="14,2 14,8 20,8" />
            <line x1="12" y1="18" x2="12" y2="12" />
            <line x1="9" y1="15" x2="15" y2="15" />
          </svg>
          Upload Your First Shot
        </a>
        <% } %>
      </div>
    </div>
  </div>
</main>
